<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Canvas playground docs</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="stylesheet" href="doc files/style.css">
</head>

<body>
    <nav id='nav'>
        <ul id='mainUl'>
            <li><button class="PGLink" onclick="location.href = 'index.html'">песочница</button></li>
            <li><button id='startPageButton' data-link='doc files/pages/title.html'>вступление</button></li>
            <li><button onclick="getContent('doc files/pages/ways to define example.html')">определяем пример</button></li>
            <li><button onclick="getContent('doc files/dummy.html')">dummy</button></li>
            <li>Чай</li>
            <li>Молоко</li>
            <li>Кофе</li>
            <li>Чай</li>
            <li>Кофе</li>
            <li>Чай</li>
            <li>Молоко</li>
            <li>Кофе</li>
            <li>Чай</li>
            <li>Кофе</li>
            <li>Чай</li>
            <li>Молоко</li>
            <li>Кофе</li>
            <li>Чай</li>
            
        </ul>
    </nav>

    <main id='main'></main>

    <script>
        (async () => {
            try {
                await fetch('doc files/dummy.html');
            } catch (e) {
                if (e.message == 'NetworkError when attempting to fetch resource.') {
                    console.log(e);
                    alert(`NetworkError: ты открыл документацию, но сделал это без уважения`);
                    alert(`нет, серьезно, я не могу подгрузить часть файла со своего же компа, из той же папки, потому что это видите ли небезопасно и противоречит политике CORS`);
                    alert(`открой документацию через live server , ну или подожди пока я напишу скрипт который соединяет всю документацию в одну гиганскую страницу, пека `);
                    let link = document.createElement('a');
                    link.href = "https://marketplace.visualstudio.com/items?itemName=ritwickdey.LiveServer";
                    link.innerHTML = 'про live server';

                    main.innerHTML = '';
                    main.append(link);
                }
            }
        })();
    </script>

    <script>
        async function getContent(address){
            let content = await fetch(address);
            main.innerHTML = await content.text();
        }
        getContent('doc files/pages/title.html');

        let currentPage = document.getElementById('startPageButton');
        currentPage.className = 'current';
        mainUl.onclick = (e)=>{
            if(e.target.dataset.link) getContent(e.target.dataset.link);
            
            currentPage.className = '';
            currentPage = e.target;
            currentPage.className = 'current';
        };
    </script>


</body>

</html>